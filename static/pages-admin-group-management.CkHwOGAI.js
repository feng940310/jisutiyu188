import{t as e,k as a,c as l,R as t,I as s,S as o,K as n,J as c,M as u,P as i,L as d,b as r,h as m,d as _}from"./uni.CnKTWU0K.js";import{a as f,Z as g}from"./index-C3v_m0JD.js";import{d as v,b as p,r as y,c as h,R as k,a6 as b,ad as w,a7 as x,M as C,aW as $,aP as M,_ as S,aN as F,az as I,ak as A,aY as G,ai as V,aX as T}from"./vendor.CqD9dFNX.js";import{_ as U}from"./_plugin-vue_export-helper.BCo6x5W8.js";const z=U(v({__name:"group-management",setup(v){const U=p(!0),z=p([]),B=p(20),j=p(!1),L=p(!1),D=p(!1),N=p({}),P=p({}),H=y({name:"",description:"",syncMessages:!1}),R=p([]),Y=p(!1),J=p(""),K=p([]),W=p([]),X=p(!1),Z=p(new Set),q=h((()=>{if(!J.value.trim())return W.value;const e=J.value.toLowerCase();return W.value.filter((a=>a.nickname&&a.nickname.toLowerCase().includes(e)||a.mobile&&a.mobile.includes(e)))})),E=h((()=>new Set(R.value.map((e=>e.user_id))))),O=h((()=>Array.from(Z.value).some((e=>E.value.has(e))))),Q=h((()=>Array.from(Z.value).some((e=>!E.value.has(e))))),ee=h((()=>Array.from(Z.value).filter((e=>E.value.has(e))).length)),ae=h((()=>Array.from(Z.value).filter((e=>!E.value.has(e))).length));k((()=>{le()}));const le=async()=>{try{const a=e();B.value=a.statusBarHeight||20,await te(),await se()}catch(a){console.error("åˆå§‹åŒ–é¡µé¢å¤±è´¥:",a),U.value=!1}},te=async()=>{try{const e=a("token");if(!e)return l({title:"è¯·å…ˆç™»å½•",icon:"none"}),void setTimeout((()=>{t()}),1500);const s=await f.callFunction("user",{action:"checkAdminStatus",token:e});if(!s||0!==s.code||!s.is_admin)return l({title:"æ— ç®¡ç†å‘˜æƒé™",icon:"none"}),void setTimeout((()=>{t()}),1500)}catch(e){console.error("æ£€æŸ¥ç®¡ç†å‘˜æƒé™å¤±è´¥:",e),l({title:"æƒé™æ£€æŸ¥å¤±è´¥",icon:"none"}),setTimeout((()=>{t()}),1500)}},se=async()=>{try{U.value=!0;const e=a("token"),t=await f.callFunction("chat",{action:"getGroupList",token:e});t&&0===t.code?(z.value=t.data||[],console.log("ç¾¤èŠåˆ—è¡¨åŠ è½½æˆåŠŸ:",z.value.length)):(console.error("åŠ è½½ç¾¤èŠåˆ—è¡¨å¤±è´¥:",null==t?void 0:t.msg),l({title:(null==t?void 0:t.msg)||"åŠ è½½å¤±è´¥",icon:"none"}))}catch(e){console.error("åŠ è½½ç¾¤èŠåˆ—è¡¨å¼‚å¸¸:",e),l({title:"ç½‘ç»œå¼‚å¸¸",icon:"none"})}finally{U.value=!1}},oe=()=>{H.name="",H.description="",H.syncMessages=!1,j.value=!0},ne=()=>{H.syncMessages=!H.syncMessages},ce=()=>{j.value=!1},ue=async()=>{try{if(!H.name.trim())return void l({title:"è¯·è¾“å…¥ç¾¤èŠåç§°",icon:"none"});r({title:"åˆ›å»ºä¸­..."});const e=a("token"),t=await f.callFunction("chat",{action:"createGroup",data:{groupName:H.name.trim(),groupDescription:H.description.trim(),syncMessages:H.syncMessages,memberIds:[]},token:e});m(),t&&0===t.code?(l({title:"åˆ›å»ºæˆåŠŸ",icon:"success"}),ce(),await se()):l({title:(null==t?void 0:t.msg)||"åˆ›å»ºå¤±è´¥",icon:"none"})}catch(e){m(),console.error("åˆ›å»ºç¾¤èŠå¤±è´¥:",e),l({title:"ç½‘ç»œå¼‚å¸¸",icon:"none"})}},ie=async e=>{try{Y.value=!0;const l=a("token"),t=await f.callFunction("chat",{action:"getGroupMembers",data:{groupId:e},token:l});t&&0===t.code?R.value=t.data||[]:console.error("åŠ è½½ç¾¤æˆå‘˜å¤±è´¥:",null==t?void 0:t.msg)}catch(l){console.error("åŠ è½½ç¾¤æˆå‘˜å¼‚å¸¸:",l)}finally{Y.value=!1}},de=async()=>{try{X.value=!0;const e=a("token"),{result:t}=await g.callFunction({name:"user",data:{action:"getAllUsers",token:e}});t&&0===t.code?W.value=t.data||[]:(console.error("åŠ è½½ç”¨æˆ·åˆ—è¡¨å¤±è´¥:",null==t?void 0:t.msg),(null==t?void 0:t.msg)&&t.msg.includes("æœªçŸ¥çš„æ“ä½œ")?(console.log("åç«¯æš‚ä¸æ”¯æŒgetAllUsersï¼Œå°†ä½¿ç”¨æœç´¢æ¨¡å¼"),W.value=[],l({title:"è¯·ä½¿ç”¨æœç´¢åŠŸèƒ½æ·»åŠ ç”¨æˆ·",icon:"none"})):l({title:(null==t?void 0:t.msg)||"åŠ è½½ç”¨æˆ·å¤±è´¥",icon:"none"}))}catch(e){console.error("åŠ è½½ç”¨æˆ·åˆ—è¡¨å¼‚å¸¸:",e),l({title:"ç½‘ç»œå¼‚å¸¸ï¼Œè¯·ä½¿ç”¨æœç´¢åŠŸèƒ½",icon:"none"})}finally{X.value=!1}},re=async()=>{J.value.trim()&&0===W.value.length&&await me(J.value.trim())},me=async e=>{try{if(/^1[3-9]\d{9}$/.test(e)){const l=a("token"),{result:t}=await g.callFunction({name:"user",data:{action:"getUserByMobile",data:{mobile:e},token:l}});if(t&&0===t.code&&t.data){W.value.find((e=>e.user_id===t.data.user_id))||(W.value.push(t.data),console.log("æ·»åŠ æœç´¢åˆ°çš„ç”¨æˆ·:",t.data))}}}catch(l){console.error("æœç´¢ç”¨æˆ·å¤±è´¥:",l)}},_e=e=>E.value.has(e),fe=async()=>{try{const e=Array.from(Z.value).filter((e=>!E.value.has(e)));if(0===e.length)return void l({title:"è¯·é€‰æ‹©è¦åŠ å…¥çš„ç”¨æˆ·",icon:"none"});r({title:"æ·»åŠ ä¸­..."});const t=a("token"),{result:s}=await g.callFunction({name:"chat",data:{action:"addGroupMember",data:{groupId:N.value.group_id,userIds:e},token:t}});m(),s&&0===s.code?(l({title:`æˆåŠŸæ·»åŠ  ${e.length} ä½æˆå‘˜`,icon:"success"}),Z.value.clear(),Z.value=new Set,await ie(N.value.group_id)):l({title:(null==s?void 0:s.msg)||"æ·»åŠ å¤±è´¥",icon:"none"})}catch(e){m(),console.error("æ‰¹é‡æ·»åŠ æˆå‘˜å¤±è´¥:",e),l({title:"ç½‘ç»œå¼‚å¸¸",icon:"none"})}},ge=async()=>{try{const e=Array.from(Z.value).filter((e=>E.value.has(e)));if(0===e.length)return void l({title:"è¯·é€‰æ‹©è¦ç§»é™¤çš„æˆå‘˜",icon:"none"});if(!(await _({title:"ç¡®è®¤ç§»é™¤",content:`ç¡®å®šè¦ç§»é™¤ ${e.length} ä½æˆå‘˜å—ï¼Ÿ`})).confirm)return;r({title:"ç§»é™¤ä¸­..."});const t=a("token");for(const a of e){const{result:e}=await g.callFunction({name:"chat",data:{action:"removeGroupMember",data:{groupId:N.value.group_id,targetUserId:a},token:t}});e&&0!==e.code&&console.error("ç§»é™¤æˆå‘˜å¤±è´¥:",null==e?void 0:e.msg)}m(),l({title:`æˆåŠŸç§»é™¤ ${e.length} ä½æˆå‘˜`,icon:"success"}),Z.value.clear(),Z.value=new Set,await ie(N.value.group_id)}catch(e){m(),console.error("æ‰¹é‡ç§»é™¤æˆå‘˜å¤±è´¥:",e),l({title:"ç½‘ç»œå¼‚å¸¸",icon:"none"})}},ve=()=>{L.value=!1,J.value="",K.value=[],Z.value.clear(),Z.value=new Set},pe=()=>{D.value=!1,P.value={}},ye=async()=>{try{P.value.sync_messages;const e=P.value.sync_messages?"å…³é—­æ¶ˆæ¯åŒæ­¥":"å¼€å¯æ¶ˆæ¯åŒæ­¥";if(!(await _({title:"ç¡®è®¤æ“ä½œ",content:`ç¡®å®šè¦${e}ç¾¤èŠ"${P.value.group_name}"å—ï¼Ÿ`})).confirm)return;r({title:`${e}ä¸­...`});const t=a("token"),s=await f.callFunction("chat",{action:"toggleGroupSync",data:{groupId:P.value.group_id,syncMessages:!P.value.sync_messages},token:t});if(m(),s&&0===s.code){l({title:`${e}æˆåŠŸ`,icon:"success"}),P.value.sync_messages=!P.value.sync_messages;const a=z.value.findIndex((e=>e.group_id===P.value.group_id));-1!==a&&(z.value[a].sync_messages=P.value.sync_messages),pe()}else l({title:(null==s?void 0:s.msg)||`${e}å¤±è´¥`,icon:"none"})}catch(e){m(),console.error("åˆ‡æ¢åŒæ­¥çŠ¶æ€å¤±è´¥:",e),l({title:"ç½‘ç»œå¼‚å¸¸",icon:"none"})}},he=async()=>{try{const e=P.value.is_muted?"unmuteGroup":"muteGroup",t=P.value.is_muted?"è§£é™¤ç¦è¨€":"å…¨å‘˜ç¦è¨€";if(!(await _({title:"ç¡®è®¤æ“ä½œ",content:`ç¡®å®šè¦${t}ç¾¤èŠ"${P.value.group_name}"å—ï¼Ÿ`})).confirm)return;r({title:`${t}ä¸­...`});const s=a("token"),o=await f.callFunction("chat",{action:e,data:{groupId:P.value.group_id},token:s});if(m(),o&&0===o.code){l({title:`${t}æˆåŠŸ`,icon:"success"}),P.value.is_muted=!P.value.is_muted;const e=z.value.findIndex((e=>e.group_id===P.value.group_id));-1!==e&&(z.value[e].is_muted=P.value.is_muted),pe()}else l({title:(null==o?void 0:o.msg)||`${t}å¤±è´¥`,icon:"none"})}catch(e){m(),console.error("åˆ‡æ¢ç¦è¨€çŠ¶æ€å¤±è´¥:",e),l({title:"ç½‘ç»œå¼‚å¸¸",icon:"none"})}},ke=async()=>{try{if(!(await _({title:"ç¡®è®¤è§£æ•£ç¾¤èŠ",content:`ç¡®å®šè¦è§£æ•£ç¾¤èŠ"${P.value.group_name}"å—ï¼Ÿ\n\næ­¤æ“ä½œå°†æ°¸ä¹…åˆ é™¤ç¾¤èŠã€æ¸…ç©ºæ‰€æœ‰èŠå¤©è®°å½•å¹¶ç§»é™¤æ‰€æœ‰ç¾¤æˆå‘˜ã€‚\n\næ­¤æ“ä½œä¸å¯æ¢å¤ï¼`,showCancel:!0,cancelText:"å–æ¶ˆ",confirmText:"ç¡®è®¤è§£æ•£",confirmColor:"#ff4757"})).confirm)return;r({title:"è§£æ•£ä¸­..."});const e=a("token"),t=await f.callFunction("chat",{action:"dissolveGroup",data:{groupId:P.value.group_id,groupName:P.value.group_name},token:e});m(),t&&0===t.code?(l({title:"ç¾¤èŠå·²è§£æ•£",icon:"success",duration:2e3}),pe(),setTimeout((async()=>{await se()}),500)):l({title:(null==t?void 0:t.msg)||"è§£æ•£å¤±è´¥",icon:"none",duration:3e3})}catch(e){m(),console.error("è§£æ•£ç¾¤èŠå¤±è´¥:",e),l({title:"ç½‘ç»œå¼‚å¸¸",icon:"none",duration:3e3})}},be=e=>{if(!e)return"";const a=new Date(e);return`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")} ${String(a.getHours()).padStart(2,"0")}:${String(a.getMinutes()).padStart(2,"0")}`},we=()=>{t()},xe=()=>{console.log("è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹")},Ce=()=>{console.log("è¾“å…¥æ¡†å¤±å»ç„¦ç‚¹")};return(e,a)=>{const l=s,t=n,r=c,m=o,_=u,f=i,g=d;return x(),b(l,{class:"group-management"},{default:w((()=>[C(l,{class:"page-background"}),C(l,{class:"nav-bar",style:M({paddingTop:B.value+"px",height:B.value+"px"})},{default:w((()=>[C(l,{class:"nav-content"},{default:w((()=>[C(l,{class:"nav-left",onClick:we},{default:w((()=>[C(l,{class:"back-arrow"})])),_:1}),C(l,{class:"nav-center"},{default:w((()=>[S("ç¾¤èŠç®¡ç†")])),_:1}),C(l,{class:"nav-right"})])),_:1})])),_:1},8,["style"]),C(m,{class:"content","scroll-y":"true",style:M({paddingTop:58+B.value+"px",paddingBottom:"120rpx"})},{default:w((()=>[U.value?(x(),b(l,{key:0,class:"loading"},{default:w((()=>[C(t,null,{default:w((()=>[S("åŠ è½½ä¸­...")])),_:1})])),_:1})):z.value.length>0?(x(),b(l,{key:1,class:"group-list"},{default:w((()=>[(x(!0),F(I,null,A(z.value,((e,a)=>(x(),b(l,{key:e.group_id,class:"group-item"},{default:w((()=>[C(l,{class:"group-info",onClick:a=>(e=>{console.log("æŸ¥çœ‹ç¾¤èŠè¯¦æƒ…:",e)})(e)},{default:w((()=>[C(l,{class:"group-avatar"},{default:w((()=>[e.group_avatar?(x(),b(r,{key:1,class:"avatar-image",src:e.group_avatar,mode:"aspectFill"},null,8,["src"])):(x(),b(l,{key:0,class:"avatar-placeholder"},{default:w((()=>[C(t,{class:"avatar-text"},{default:w((()=>[S(G(e.group_name.charAt(0)),1)])),_:2},1024)])),_:2},1024))])),_:2},1024),C(l,{class:"group-details"},{default:w((()=>[C(l,{class:"group-header"},{default:w((()=>[C(t,{class:"group-name"},{default:w((()=>[S(G(e.group_name),1)])),_:2},1024),C(l,{class:"group-tags"},{default:w((()=>[C(t,{class:"member-count"},{default:w((()=>[S(G(e.memberCount)+"äºº",1)])),_:2},1024),e.sync_messages?(x(),b(t,{key:0,class:"sync-tag"},{default:w((()=>[S("ğŸ”„ åŒæ­¥")])),_:1})):$("",!0)])),_:2},1024)])),_:2},1024),C(t,{class:"group-desc"},{default:w((()=>[S(G(e.group_description||"æš‚æ— æè¿°"),1)])),_:2},1024),C(t,{class:"create-time"},{default:w((()=>[S("åˆ›å»ºæ—¶é—´ï¼š"+G(be(e.create_time)),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"]),C(l,{class:"group-actions"},{default:w((()=>[C(t,{class:"action-btn manage-btn",onClick:a=>(e=>{P.value={...e},D.value=!0})(e)},{default:w((()=>[S("ç®¡ç†")])),_:2},1032,["onClick"]),C(t,{class:"action-btn",onClick:a=>(async e=>{N.value=e,Z.value.clear(),L.value=!0,await Promise.all([ie(e.group_id),de()])})(e)},{default:w((()=>[S("æˆå‘˜")])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)))),128))])),_:1})):(x(),b(l,{key:2,class:"empty-state"},{default:w((()=>[C(l,{class:"empty-icon"},{default:w((()=>[S("ğŸ‘¥")])),_:1}),C(t,{class:"empty-text"},{default:w((()=>[S("æš‚æ— ç¾¤èŠ")])),_:1}),C(t,{class:"empty-hint"},{default:w((()=>[S('ç‚¹å‡»å³ä¸‹è§’"+"æŒ‰é’®åˆ›å»ºç¾¤èŠ')])),_:1})])),_:1}))])),_:1},8,["style"]),C(l,{class:"floating-add-btn",onClick:oe},{default:w((()=>[C(t,{class:"add-icon"},{default:w((()=>[S("+")])),_:1})])),_:1}),j.value?(x(),b(l,{key:0,class:"modal create-modal",onClick:ce},{default:w((()=>[C(l,{class:"modal-content create-modal-content",onClick:a[2]||(a[2]=V((()=>{}),["stop"]))},{default:w((()=>[C(l,{class:"modal-header create-modal-header"},{default:w((()=>[C(l,{class:"header-icon"},{default:w((()=>[C(t,{class:"icon-text"},{default:w((()=>[S("ğŸ‘¥")])),_:1})])),_:1}),C(t,{class:"modal-title"},{default:w((()=>[S("åˆ›å»ºç¾¤èŠ")])),_:1}),C(l,{class:"modal-close",onClick:ce},{default:w((()=>[C(t,{class:"close-icon"},{default:w((()=>[S("âœ•")])),_:1})])),_:1})])),_:1}),C(l,{class:"modal-body create-modal-body"},{default:w((()=>[C(l,{class:"form-item"},{default:w((()=>[C(l,{class:"input-group"},{default:w((()=>[C(l,{class:"input-icon"},{default:w((()=>[C(t,{class:"icon"},{default:w((()=>[S("ğŸ“")])),_:1})])),_:1}),C(l,{class:"input-wrapper"},{default:w((()=>[C(t,{class:"input-label"},{default:w((()=>[S("ç¾¤èŠåç§°")])),_:1}),C(_,{class:"form-input modern-input",modelValue:H.name,"onUpdate:modelValue":a[0]||(a[0]=e=>H.name=e),placeholder:"è¾“å…¥ä¸€ä¸ªæœ‰è¶£çš„ç¾¤å...",maxlength:"20",onFocus:xe,onBlur:Ce},null,8,["modelValue"]),C(l,{class:"input-underline"})])),_:1})])),_:1})])),_:1}),C(l,{class:"form-item"},{default:w((()=>[C(l,{class:"input-group"},{default:w((()=>[C(l,{class:"input-icon"},{default:w((()=>[C(t,{class:"icon"},{default:w((()=>[S("ğŸ’¬")])),_:1})])),_:1}),C(l,{class:"input-wrapper"},{default:w((()=>[C(t,{class:"input-label"},{default:w((()=>[S("ç¾¤èŠæè¿°")])),_:1}),C(f,{class:"form-textarea modern-textarea",modelValue:H.description,"onUpdate:modelValue":a[1]||(a[1]=e=>H.description=e),placeholder:"ä»‹ç»ä¸€ä¸‹è¿™ä¸ªç¾¤çš„ç”¨é€”å§...",maxlength:"100",onFocus:xe,onBlur:Ce},null,8,["modelValue"]),C(l,{class:"input-underline"})])),_:1})])),_:1})])),_:1}),C(l,{class:"form-item"},{default:w((()=>[C(l,{class:"sync-option-group"},{default:w((()=>[C(l,{class:"sync-option-header"},{default:w((()=>[C(l,{class:"sync-icon"},{default:w((()=>[C(t,{class:"icon"},{default:w((()=>[S("ğŸ”„")])),_:1})])),_:1}),C(l,{class:"sync-info"},{default:w((()=>[C(t,{class:"sync-label"},{default:w((()=>[S("åŒæ­¥èŠå¤©è®°å½•")])),_:1}),C(t,{class:"sync-desc"},{default:w((()=>[S("å°†èŠå¤©è®°å½•ç®¡ç†é¡µé¢çš„æ–°å¢æ¶ˆæ¯åŒæ­¥åˆ°æ­¤ç¾¤èŠ")])),_:1})])),_:1})])),_:1}),C(l,{class:"sync-toggle",onClick:ne},{default:w((()=>[C(l,{class:T(["toggle-track",{active:H.syncMessages}])},{default:w((()=>[C(l,{class:T(["toggle-thumb",{active:H.syncMessages}])},null,8,["class"])])),_:1},8,["class"]),C(t,{class:"toggle-text"},{default:w((()=>[S(G(H.syncMessages?"å¼€å¯":"å…³é—­"),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1}),C(l,{class:"modal-footer create-modal-footer"},{default:w((()=>[C(g,{class:"modern-btn cancel-btn",onClick:ce},{default:w((()=>[C(t,{class:"btn-text"},{default:w((()=>[S("å–æ¶ˆ")])),_:1})])),_:1}),C(g,{class:"modern-btn confirm-btn",onClick:ue,disabled:!H.name.trim()},{default:w((()=>[C(l,{class:"btn-content"},{default:w((()=>[C(t,{class:"btn-text"},{default:w((()=>[S("åˆ›å»ºç¾¤èŠ")])),_:1}),C(t,{class:"btn-icon"},{default:w((()=>[S("ğŸš€")])),_:1})])),_:1})])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1})):$("",!0),L.value?(x(),b(l,{key:1,class:"modal member-management-modal",onClick:ve},{default:w((()=>[C(l,{class:"modal-content member-modal",onClick:a[4]||(a[4]=V((()=>{}),["stop"]))},{default:w((()=>[C(l,{class:"modal-header member-header"},{default:w((()=>[C(l,{class:"header-icon"},{default:w((()=>[C(t,{class:"icon-text"},{default:w((()=>[S("ğŸ‘¥")])),_:1})])),_:1}),C(t,{class:"modal-title"},{default:w((()=>[S(G(N.value.group_name)+" - æˆå‘˜ç®¡ç†",1)])),_:1}),C(l,{class:"modal-close",onClick:[V(ve,["stop"]),V(ve,["stop"])],style:{"z-index":"9999",position:"relative"}},{default:w((()=>[C(t,{class:"close-icon"},{default:w((()=>[S("âœ•")])),_:1})])),_:1})])),_:1}),C(l,{class:"modal-body member-body"},{default:w((()=>[C(l,{class:"search-section"},{default:w((()=>[C(l,{class:"search-box"},{default:w((()=>[C(t,{class:"search-icon"},{default:w((()=>[S("ğŸ”")])),_:1}),C(_,{class:"search-input-modern",modelValue:J.value,"onUpdate:modelValue":a[3]||(a[3]=e=>J.value=e),placeholder:"æœç´¢ç”¨æˆ·å§“åæˆ–æ‰‹æœºå·...",onInput:re},null,8,["modelValue"])])),_:1})])),_:1}),C(l,{class:"users-section"},{default:w((()=>[C(l,{class:"section-header"},{default:w((()=>[C(t,{class:"section-title"},{default:w((()=>[S("å…¨éƒ¨ç”¨æˆ·")])),_:1}),C(t,{class:"selected-count"},{default:w((()=>[S("å·²é€‰æ‹© "+G(Z.value.size)+" äºº",1)])),_:1})])),_:1}),X.value?(x(),b(l,{key:0,class:"loading-state"},{default:w((()=>[C(l,{class:"loading-spinner"}),C(t,{class:"loading-text"},{default:w((()=>[S("åŠ è½½ç”¨æˆ·åˆ—è¡¨...")])),_:1})])),_:1})):0===q.value.length?(x(),b(l,{key:1,class:"empty-users-state"},{default:w((()=>[C(l,{class:"empty-icon"},{default:w((()=>[S("ğŸ‘¤")])),_:1}),C(t,{class:"empty-title"},{default:w((()=>[S("æš‚æ— ç”¨æˆ·æ•°æ®")])),_:1}),C(t,{class:"empty-hint"},{default:w((()=>[S("è¯·åœ¨æœç´¢æ¡†ä¸­è¾“å…¥æ‰‹æœºå·æ¥æŸ¥æ‰¾ç”¨æˆ·")])),_:1})])),_:1})):(x(),b(l,{key:2,class:"users-list"},{default:w((()=>[(x(!0),F(I,null,A(q.value,(e=>(x(),b(l,{key:e.user_id,class:"user-item-checkbox",onClick:a=>{return l=e.user_id,Z.value.has(l)?Z.value.delete(l):Z.value.add(l),void(Z.value=new Set(Z.value));var l}},{default:w((()=>[C(l,{class:"user-checkbox"},{default:w((()=>[C(l,{class:T(["checkbox",{"checkbox-checked":Z.value.has(e.user_id),"checkbox-in-group":_e(e.user_id)&&!Z.value.has(e.user_id)}])},{default:w((()=>[Z.value.has(e.user_id)?(x(),b(t,{key:0,class:"checkbox-icon"},{default:w((()=>[S("âœ“")])),_:1})):_e(e.user_id)?(x(),b(t,{key:1,class:"checkbox-icon in-group-icon"},{default:w((()=>[S("â—")])),_:1})):$("",!0)])),_:2},1032,["class"])])),_:2},1024),C(l,{class:"user-info"},{default:w((()=>[C(l,{class:"user-main-info"},{default:w((()=>[C(t,{class:"user-name"},{default:w((()=>[S(G(e.nickname||e.mobile),1)])),_:2},1024),C(l,{class:"user-status"},{default:w((()=>[_e(e.user_id)?(x(),b(t,{key:0,class:"status-tag in-group"},{default:w((()=>[S(" å·²åœ¨ç¾¤å†… ")])),_:1})):(x(),b(t,{key:1,class:"status-tag not-in-group"},{default:w((()=>[S(" æœªåŠ å…¥ ")])),_:1}))])),_:2},1024)])),_:2},1024),C(t,{class:"user-mobile"},{default:w((()=>[S(G(e.mobile),1)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}))])),_:1})])),_:1}),C(l,{class:"modal-footer member-footer"},{default:w((()=>[C(g,{class:"batch-btn add-btn",onClick:fe,disabled:0===Z.value.size||!Q.value},{default:w((()=>[C(t,{class:"btn-text"},{default:w((()=>[S("åŠ å…¥ç¾¤èŠ")])),_:1}),C(t,{class:"btn-count"},{default:w((()=>[S("("+G(ae.value)+")",1)])),_:1})])),_:1},8,["disabled"]),C(g,{class:"batch-btn remove-btn",onClick:ge,disabled:0===Z.value.size||!O.value},{default:w((()=>[C(t,{class:"btn-text"},{default:w((()=>[S("ç§»å‡ºç¾¤èŠ")])),_:1}),C(t,{class:"btn-count"},{default:w((()=>[S("("+G(ee.value)+")",1)])),_:1})])),_:1},8,["disabled"])])),_:1})])),_:1})])),_:1})):$("",!0),D.value?(x(),b(l,{key:2,class:"modal group-manage-modal",onClick:pe},{default:w((()=>[C(l,{class:"modal-content group-manage-content",onClick:a[5]||(a[5]=V((()=>{}),["stop"]))},{default:w((()=>[C(l,{class:"modal-header"},{default:w((()=>[C(l,{class:"header-icon"},{default:w((()=>[C(t,{class:"icon-text"},{default:w((()=>[S("âš™ï¸")])),_:1})])),_:1}),C(t,{class:"modal-title"},{default:w((()=>[S(G(P.value.group_name)+" - ç¾¤èŠç®¡ç†",1)])),_:1}),C(l,{class:"modal-close",onClick:V(pe,["stop"])},{default:w((()=>[C(t,{class:"close-icon"},{default:w((()=>[S("âœ•")])),_:1})])),_:1})])),_:1}),C(l,{class:"modal-body group-manage-body"},{default:w((()=>[C(l,{class:"manage-options"},{default:w((()=>[C(l,{class:"manage-option",onClick:ye},{default:w((()=>[C(l,{class:"option-icon sync-icon"},{default:w((()=>[C(t,null,{default:w((()=>[S(G(P.value.sync_messages?"ğŸ”„":"â¸ï¸"),1)])),_:1})])),_:1}),C(l,{class:"option-content"},{default:w((()=>[C(t,{class:"option-title"},{default:w((()=>[S(G(P.value.sync_messages?"å…³é—­æ¶ˆæ¯åŒæ­¥":"å¼€å¯æ¶ˆæ¯åŒæ­¥"),1)])),_:1}),C(t,{class:"option-desc"},{default:w((()=>[S(G(P.value.sync_messages?"åœæ­¢æ¥æ”¶èŠå¤©è®°å½•ç®¡ç†é¡µé¢çš„æ¶ˆæ¯":"è‡ªåŠ¨æ¥æ”¶èŠå¤©è®°å½•ç®¡ç†é¡µé¢æ–°å¢çš„æ¶ˆæ¯"),1)])),_:1})])),_:1})])),_:1}),C(l,{class:"manage-option",onClick:he},{default:w((()=>[C(l,{class:"option-icon mute-icon"},{default:w((()=>[C(t,null,{default:w((()=>[S(G(P.value.is_muted?"ğŸ”Š":"ğŸ”‡"),1)])),_:1})])),_:1}),C(l,{class:"option-content"},{default:w((()=>[C(t,{class:"option-title"},{default:w((()=>[S(G(P.value.is_muted?"è§£é™¤ç¦è¨€":"å…¨å‘˜ç¦è¨€"),1)])),_:1}),C(t,{class:"option-desc"},{default:w((()=>[S(G(P.value.is_muted?"æ¢å¤ç¾¤æˆå‘˜å‘è¨€æƒé™":"ç¦æ­¢æ™®é€šæˆå‘˜å‘è¨€ï¼Œä»…ç®¡ç†å‘˜å¯å‘è¨€"),1)])),_:1})])),_:1})])),_:1}),C(l,{class:"manage-option danger-option",onClick:ke},{default:w((()=>[C(l,{class:"option-icon dissolve-icon"},{default:w((()=>[C(t,null,{default:w((()=>[S("ğŸ’¥")])),_:1})])),_:1}),C(l,{class:"option-content"},{default:w((()=>[C(t,{class:"option-title"},{default:w((()=>[S("è§£æ•£ç¾¤èŠ")])),_:1}),C(t,{class:"option-desc"},{default:w((()=>[S("æ°¸ä¹…åˆ é™¤ç¾¤èŠï¼Œæ¸…ç©ºæ‰€æœ‰èŠå¤©è®°å½•")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):$("",!0)])),_:1})}}}),[["__scopeId","data-v-8176e6a6"]]);export{z as default};
