<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
    <title>æé€Ÿä½“è‚²</title>
    <link rel="stylesheet" href="./static/uni.0fcc960b.css">
    <link rel="stylesheet" crossorigin href="./static/index-4NelVyHk.css">
    
    <style>
      #loading-status {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background: rgba(0,0,0,0.8);
        color: white;
        padding: 20px;
        border-radius: 10px;
        font-family: Arial, sans-serif;
        z-index: 9999;
        text-align: center;
      }
      .loading-step {
        margin: 5px 0;
        padding: 5px;
      }
      .success { color: #4CAF50; }
      .error { color: #f44336; }
      .loading { color: #2196F3; }
    </style>
  </head>
  <body>
    <div id="app"><!--app-html--></div>
    
    <!-- åŠ è½½çŠ¶æ€æ˜¾ç¤º -->
    <div id="loading-status">
      <div class="loading-step loading" id="step1">ğŸ”„ æ­£åœ¨åŠ è½½CSSæ ·å¼...</div>
      <div class="loading-step" id="step2">â³ ç­‰å¾…åŠ è½½ESæ¨¡å—...</div>
      <div class="loading-step" id="step3">â³ ç­‰å¾…åŠ è½½uni-app...</div>
      <div class="loading-step" id="step4">â³ ç­‰å¾…åº”ç”¨åˆå§‹åŒ–...</div>
    </div>

    <script>
      // åŠ è½½çŠ¶æ€ç®¡ç†
      let loadingSteps = {
        css: false,
        modules: false,
        uniapp: false,
        init: false
      };

      function updateStep(step, status, message) {
        const element = document.getElementById(step);
        element.className = `loading-step ${status}`;
        element.textContent = message;
        
        // æ£€æŸ¥æ˜¯å¦æ‰€æœ‰æ­¥éª¤å®Œæˆ
        if (Object.values(loadingSteps).every(s => s)) {
          setTimeout(() => {
            document.getElementById('loading-status').style.display = 'none';
          }, 1000);
        }
      }

      // æ£€æµ‹CSSåŠ è½½
      setTimeout(() => {
        loadingSteps.css = true;
        updateStep('step1', 'success', 'âœ… CSSæ ·å¼åŠ è½½å®Œæˆ');
      }, 500);

      // ESæ¨¡å—åŠ è½½æ£€æµ‹
      let moduleLoadTimeout = setTimeout(() => {
        updateStep('step2', 'error', 'âŒ ESæ¨¡å—åŠ è½½è¶…æ—¶');
        updateStep('step3', 'error', 'âŒ ä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ...');
        
        // å¤‡ç”¨æ–¹æ¡ˆï¼šæ˜¾ç¤ºé”™è¯¯ä¿¡æ¯å’Œè§£å†³å»ºè®®
        document.getElementById('step4').innerHTML = `
          <div style="color: #ff9800; margin-top: 10px;">
            <strong>âš ï¸ æ£€æµ‹åˆ°å…¼å®¹æ€§é—®é¢˜</strong><br>
            GitHub Pageså¯èƒ½ä¸æ”¯æŒå½“å‰çš„ESæ¨¡å—é…ç½®<br>
            <small>å»ºè®®ï¼šä½¿ç”¨ä¼ ç»Ÿæ„å»ºæ¨¡å¼æˆ–æ·»åŠ æ›´å¤špolyfill</small>
          </div>
        `;
      }, 5000);

      // æ¨¡å—é¢„åŠ è½½æ£€æµ‹
      const modulePreloads = document.querySelectorAll('link[rel="modulepreload"]');
      let loadedModules = 0;
      
      modulePreloads.forEach(link => {
        link.onload = () => {
          loadedModules++;
          if (loadedModules === modulePreloads.length) {
            clearTimeout(moduleLoadTimeout);
            loadingSteps.modules = true;
            updateStep('step2', 'success', 'âœ… ESæ¨¡å—é¢„åŠ è½½å®Œæˆ');
          }
        };
        
        link.onerror = () => {
          clearTimeout(moduleLoadTimeout);
          updateStep('step2', 'error', 'âŒ ESæ¨¡å—åŠ è½½å¤±è´¥');
        };
      });
    </script>

    <!-- ES Module Polyfill -->
    <script nomodule src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>
    
    <!-- ä¸»æ¨¡å—åŠ è½½ -->
    <script type="module" crossorigin>
      try {
        // åŠ¨æ€å¯¼å…¥ä¸»æ¨¡å—
        const mainModule = await import('./static/index-C3v_m0JD.js');
        loadingSteps.uniapp = true;
        updateStep('step3', 'success', 'âœ… uni-appæ¨¡å—åŠ è½½å®Œæˆ');
        
        // ç­‰å¾…åº”ç”¨åˆå§‹åŒ–
        setTimeout(() => {
          loadingSteps.init = true;
          updateStep('step4', 'success', 'âœ… åº”ç”¨åˆå§‹åŒ–å®Œæˆ');
        }, 1000);
        
      } catch (error) {
        console.error('æ¨¡å—åŠ è½½å¤±è´¥:', error);
        updateStep('step3', 'error', 'âŒ uni-appåŠ è½½å¤±è´¥: ' + error.message);
        updateStep('step4', 'error', 'ğŸ’¡ è¯·æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯');
      }
    </script>
    
    <!-- é¢„åŠ è½½é“¾æ¥ -->
    <link rel="modulepreload" crossorigin href="./static/vendor.CqD9dFNX.js">
    <link rel="modulepreload" crossorigin href="./static/uni.CnKTWU0K.js">
  </body>
</html>
